name: "Stage 3: Design to Haskell Implementation"
description: "Transform design patterns into concrete Haskell implementations"
version: "v4.0.1"
stage: 3
language: "Haskell"

inputs:
  required_files:
    - path: "design/qi.v4.design.analysis.md"
      description: "Design analysis with complete operation coverage from Stage 2"
    
    - path: "guides/common.md"
      description: "Mathematical foundations and categorical structures"
    
    - path: "guides/impl.prompt.md"
      description: "Stage 3 transformation instructions and methodology"

outputs:
  target_files:
    - path: "impl/qi.v4.hs.template.md"
      description: "Haskell code template with runnable examples"
      
    - path: "impl/qi.v4.hs.impl.md"
      description: "Haskell implementation guide with step-by-step instructions"

  project_structure:
    base_path: "src/"
    components:
      - "base/ (Result, QiError)"
      - "core/ (Configuration, Logging, Cache)"
      - "http/ (HTTP client with circuit breaker)"
      - "document/ (Document generation with streaming)"
      - "clp/ (Command-line processing)"

validation:
  method: "Generate verification report using success criteria from guides/impl.prompt.md"
  
  verification_report:
    target_file: "stage3-haskell-verification-report.md"
    required_sections:
      - "Operation Implementation Verification"
      - "Template Code Quality Verification"
      - "Implementation Guide Completeness Verification"
      - "Mathematical Property Preservation Verification"
      - "Success Criteria Compliance"
    
    format: |
      # Stage 3 Haskell Verification Report
      
      ## Operation Implementation Verification
      [Check every operation from design analysis has Haskell implementation]
      
      ## Template Code Quality Verification
      [Verify all code is concrete, runnable, and follows Haskell best practices]
      
      ## Implementation Guide Completeness Verification
      [Confirm step-by-step instructions are complete and executable]
      
      ## Mathematical Property Preservation Verification
      [Validate categorical laws preserved in Haskell code structure]
      
      ## Success Criteria Compliance
      [Complete checklist from impl.prompt.md]
      
      ## Overall Assessment
      [Pass/Fail with specific issues if any]

execution:
  instructions_source: "guides/impl.prompt.md"
  context_instruction: "Follow Haskell-specific methodology and requirements from impl.prompt.md exactly"
  verification_method: "Generate systematic verification report against success criteria" 